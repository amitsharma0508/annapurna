{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { finalize } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/storage\";\nimport * as i2 from \"src/app/shared/image.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction DespicableVapeComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 8)(2, \"div\", 9);\n    i0.ɵɵtext(3, \"Add Dry Grocery\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"form\", 10);\n    i0.ɵɵlistener(\"submit\", function DespicableVapeComponent_div_11_Template_form_submit_4_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onSubmit(ctx_r2.dryGroceryForm.value));\n    });\n    i0.ɵɵelementStart(5, \"div\", 11)(6, \"div\", 12)(7, \"span\", 13);\n    i0.ɵɵtext(8, \"Product Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 12)(11, \"span\", 13);\n    i0.ɵɵtext(12, \"Product Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"input\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 12)(15, \"span\", 13);\n    i0.ɵɵtext(16, \"Product Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"textarea\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 12)(19, \"span\", 13);\n    i0.ɵɵtext(20, \"Product Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"select\", 17)(22, \"option\", 18);\n    i0.ɵɵtext(23, \"--Default--\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"option\", 19);\n    i0.ɵɵtext(25, \"featured\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"div\", 12)(27, \"span\", 13);\n    i0.ɵɵtext(28, \"Image\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"input\", 20, 21);\n    i0.ɵɵlistener(\"change\", function DespicableVapeComponent_div_11_Template_input_change_29_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.showPreview($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(31, \"div\", 12)(32, \"div\", 22)(33, \"img\", 23);\n    i0.ɵɵlistener(\"click\", function DespicableVapeComponent_div_11_Template_img_click_33_listener() {\n      i0.ɵɵrestoreView(_r3);\n\n      const _r1 = i0.ɵɵreference(30);\n\n      return i0.ɵɵresetView(_r1.click());\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(34, \"button\", 24);\n    i0.ɵɵtext(35, \"Add Product\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.dryGroceryForm);\n    i0.ɵɵadvance(29);\n    i0.ɵɵproperty(\"src\", ctx_r0.imgSrc, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport let DespicableVapeComponent = /*#__PURE__*/(() => {\n  class DespicableVapeComponent {\n    constructor(storage, service) {\n      this.storage = storage;\n      this.service = service;\n      this.selectedImage = null;\n      this.dryGroceryForm = new FormGroup({\n        productName: new FormControl('', Validators.required),\n        productPrice: new FormControl(''),\n        productDescription: new FormControl('', Validators.required),\n        productType: new FormControl('', Validators.required),\n        imageUrl: new FormControl('', Validators.required)\n      });\n      this.toggleAddForm = false;\n    }\n\n    ngOnInit() {\n      const script1 = document.createElement('script');\n      script1.src = 'assets/img/side-nav-toggle.js';\n      document.head.appendChild(script1);\n      this.resetForm();\n    } //making the adding form visible\n\n\n    openAddForm() {\n      if (this.toggleAddForm == false) {\n        this.toggleAddForm = true;\n      } else {\n        this.toggleAddForm = false;\n      }\n    } //preview image\n\n\n    showPreview(event) {\n      if (event.target.files && event.target.files[0]) {\n        const reader = new FileReader();\n\n        reader.onload = e => this.imgSrc = e.target.result;\n\n        reader.readAsDataURL(event.target.files[0]);\n        this.selectedImage = event.target.files[0];\n      } else {\n        this.imgSrc = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQr1wpLe7tCBNs9lRZIH-8qMa8HI69GZu76QQ&usqp=CAU';\n        this.selectedImage = null;\n      }\n    } //onSubmit\n\n\n    onSubmit(formValue) {\n      this.isSubmitted = true;\n\n      if (this.dryGroceryForm.valid) {\n        var filePath = `${formValue.productType}/${this.selectedImage.name.split('.').slice(0, -1).join('.')}_${new Date().getTime()}`;\n        const fileRef = this.storage.ref(filePath);\n        this.storage.upload(filePath, this.selectedImage).snapshotChanges().pipe(finalize(() => {\n          fileRef.getDownloadURL().subscribe(url => {\n            formValue['imageUrl'] = url;\n            console.log(this.dryGroceryForm.value);\n            console.log(formValue);\n            this.service.insertGroceryDetails(this.dryGroceryForm.value);\n            console.log(formValue);\n            this.resetForm();\n          });\n        })).subscribe();\n      }\n    } //\n\n\n    get formControls() {\n      return this.dryGroceryForm['controls'];\n    } //resetting the form after submit\n\n\n    resetForm() {\n      this.dryGroceryForm.reset();\n      this.dryGroceryForm.setValue({\n        productName: '',\n        productPrice: '',\n        productDescription: '',\n        productType: '',\n        imageUrl: ''\n      });\n      this.imgSrc = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQr1wpLe7tCBNs9lRZIH-8qMa8HI69GZu76QQ&usqp=CAU';\n      this.selectedImage = null;\n      this.isSubmitted = false;\n    }\n\n  }\n\n  DespicableVapeComponent.ɵfac = function DespicableVapeComponent_Factory(t) {\n    return new (t || DespicableVapeComponent)(i0.ɵɵdirectiveInject(i1.AngularFireStorage), i0.ɵɵdirectiveInject(i2.ImageService));\n  };\n\n  DespicableVapeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DespicableVapeComponent,\n    selectors: [[\"app-despicable-vape\"]],\n    decls: 12,\n    vars: 1,\n    consts: [[1, \"container\", \"mt-5\", \"pt-5\"], [1, \"multi-button\"], [1, \"group-button\", 3, \"click\"], [\"name\", \"add-outline\"], [1, \"group-button\"], [1, \"fas\", \"fa-copy\"], [1, \"fas\", \"fa-paste\"], [4, \"ngIf\"], [1, \"wrapper\"], [1, \"title\"], [\"action\", \"#\", 3, \"formGroup\", \"submit\"], [1, \"user-details\"], [1, \"input-box\"], [1, \"details\"], [\"type\", \"text\", \"placeholder\", \"Enter your fullName\", \"formControlName\", \"productName\", \"required\", \"\"], [\"type\", \"text\", \"placeholder\", \"Enter your username\", \"formControlName\", \"productPrice\", \"required\", \"\"], [\"rows\", \"4\", \"cols\", \"50\", \"type\", \"textarea\", \"placeholder\", \"Enter your email\", \"formControlName\", \"productDescription\", \"required\", \"\"], [\"formControlName\", \"productType\"], [\"value\", \"default\"], [\"value\", \"featured\"], [\"type\", \"file\", \"accept\", \"image/*\", \"formControlName\", \"imageUrl\", 3, \"change\"], [\"fileUploader\", \"\"], [1, \"text-center\"], [\"width\", \"150px\", \"height\", \"150px\", 3, \"src\", \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\"]],\n    template: function DespicableVapeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n        i0.ɵɵlistener(\"click\", function DespicableVapeComponent_Template_button_click_2_listener() {\n          return ctx.openAddForm();\n        });\n        i0.ɵɵelement(3, \"ion-icon\", 3);\n        i0.ɵɵtext(4, \" Add\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 4);\n        i0.ɵɵelement(6, \"i\", 5);\n        i0.ɵɵtext(7, \" Copy\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"button\", 4);\n        i0.ɵɵelement(9, \"i\", 6);\n        i0.ɵɵtext(10, \" Paste\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(11, DespicableVapeComponent_div_11_Template, 36, 2, \"div\", 7);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", ctx.toggleAddForm);\n      }\n    },\n    dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.FormGroupDirective, i4.FormControlName]\n  });\n  return DespicableVapeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}