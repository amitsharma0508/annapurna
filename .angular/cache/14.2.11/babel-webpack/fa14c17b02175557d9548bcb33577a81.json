{"ast":null,"code":"import { AngularFireDatabase, AngularFireList } from '@angular/fire/compat/database';\nimport { Subject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/database\";\nimport * as i2 from \"@angular/fire/compat/auth\";\nexport let ImageService = /*#__PURE__*/(() => {\n  class ImageService {\n    constructor(firebase, afAuth) {\n      this.firebase = firebase;\n      this.afAuth = afAuth;\n      this.dataSubject = new Subject();\n      this.random = new Subject();\n    }\n\n    sendData(data) {\n      this.dataSubject.next(data);\n    }\n\n    sendAuth(data) {\n      console.log(data + \"service\");\n      this.random.next(data);\n    }\n\n    getDatas() {\n      return this.random.asObservable();\n    }\n\n    getData() {\n      console.log(this.dataSubject.asObservable() + \"service2\");\n      return this.dataSubject.asObservable();\n    }\n\n    getinsertGroceryDetails() {\n      this.groceryDetails = this.firebase.list('groceryList');\n    }\n\n    insertGroceryDetails(groceryList) {\n      this.groceryDetails.push(groceryList);\n    }\n\n    getGroceryByName(id) {\n      console.log(\"id\" + id);\n      const groceryNamesRef = this.firebase.list('groceryList');\n      return groceryNamesRef.valueChanges().pipe(map(groceryNames => {\n        const ids = groceryNames[id];\n\n        if (groceryNames.hasOwnProperty(ids)) {\n          console.log(\"fetchee\");\n          const groceryItemRef = this.firebase.list(`groceryList/${id}`);\n          return groceryItemRef.valueChanges();\n        } else {\n          console.log(\"fetchee wrong\");\n          throw new Error(`Grocery item with name \"${id}\" not found.`);\n        }\n      }));\n    }\n\n    getInsertCigarettesDetails() {\n      this.cigarettesDetails = this.firebase.list('cigarettesList');\n    }\n\n    insertCigarettesDetails(cigarettesList) {\n      this.cigarettesDetails.push(cigarettesList);\n    }\n\n    getDespicableVapeDetails() {\n      this.despicableVapeDetails = this.firebase.list('despicableVapeList');\n    }\n\n    insertDespicableVapeDetails(despicableVapeList) {\n      this.despicableVapeDetails.push(despicableVapeList);\n    }\n\n    getElectronicDetails() {\n      this.electronicDetails = this.firebase.list('electronicList');\n    }\n\n    insertElectronicDetails(electronicList) {\n      this.electronicDetails.push(electronicList);\n    }\n\n    getHealthAndBeautyDetails() {\n      this.healthAndBeautyDetails = this.firebase.list('healthAndBeautyList');\n    }\n\n    insertHealthAndBeautyDetails(healthAndBeautyList) {\n      this.healthAndBeautyDetails.push(healthAndBeautyList);\n    }\n\n    getProduceDetails() {\n      this.produceDetails = this.firebase.list('produceList');\n    }\n\n    insertProduceDetails(produceList) {\n      this.produceDetails.push(produceList);\n    }\n\n    getTobaccoDetails() {\n      this.tobaccoDetails = this.firebase.list('tobaccoList');\n    }\n\n    insertTobaccoDetails(tobaccoList) {\n      this.tobaccoDetails.push(tobaccoList);\n    }\n\n    getWareHouseDetails() {\n      this.wareHouseDetails = this.firebase.list('wareHouseList');\n    }\n\n    insertWareHouseDetails(wareHouseList) {\n      console.log(\"trigreed\");\n      this.wareHouseDetails.push(wareHouseList);\n    }\n\n    getAccessoriesDetails() {\n      this.accessoriesDetails = this.firebase.list('accessoriesList');\n    }\n\n    insertAccessoriesDetails(accessoriesList) {\n      console.log(\"trigreed\");\n      this.accessoriesDetails.push(accessoriesList);\n    }\n\n    getHouseholdDetails() {\n      this.householdDetails = this.firebase.list('HouseholdList');\n    }\n\n    insertHouseholdDetails(HouseholdList) {\n      console.log(\"trigreed\");\n      this.householdDetails.push(HouseholdList);\n    }\n\n    addToCart(product, userEmail) {\n      const [username, domain] = userEmail.split('@');\n      const encodedDomain = encodeURIComponent(domain);\n      const cartItemId = this.sanitizeCartItemId(product.id);\n      return this.firebase.object(`/Cart/${username}@${encodedDomain}/${cartItemId}`).set(product);\n    }\n\n    getCartItems(userEmail) {\n      const [username, domain] = userEmail.split('@');\n      const encodedDomain = encodeURIComponent(domain);\n      return this.firebase.list(`/Cart/${username}@${encodedDomain}`).valueChanges();\n    }\n\n    removeCartItem(cartItemId) {\n      return this.afAuth.currentUser.then(user => {\n        if (user) {\n          // const sanitizedCartItemId = this.sanitizeCartItemId(cartItemId);\n          return this.firebase.list(`/Cart/${user.uid}/${cartItemId}`).remove();\n        }\n\n        throw new Error('User not authenticated');\n      });\n    }\n\n    sanitizeCartItemId(cartItemId) {\n      return cartItemId.replace(/[.#$[\\]/]/g, '');\n    }\n\n  }\n\n  ImageService.ɵfac = function ImageService_Factory(t) {\n    return new (t || ImageService)(i0.ɵɵinject(i1.AngularFireDatabase), i0.ɵɵinject(i2.AngularFireAuth));\n  };\n\n  ImageService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ImageService,\n    factory: ImageService.ɵfac,\n    providedIn: 'root'\n  });\n  return ImageService;\n})();","map":null,"metadata":{},"sourceType":"module"}